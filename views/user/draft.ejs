<!-- <%- include("../partials/user/header") %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZAPZONE - Product Details</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* Base Styles */
        .product-unavailable {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 60vh;
          text-align: center;
          background-color: #f8f9fa;
          padding: 40px 20px;
          border-radius: 12px;
          box-shadow: 0 4px 16px rgba(0,0,0,0.05);
        }

        .product-unavailable h2 {
          font-size: 2rem;
          color: #dc3545; /* Bootstrap red */
          margin-bottom: 10px;
        }    

        .product-unavailable p {
         font-size: 1.1rem;
         color: #555;
         margin-bottom: 20px;
        }

        .product-unavailable .btn {
         padding: 10px 20px;
         font-size: 1rem;
         border-radius: 8px;
        }

        body {
            background-color: #f5f5f5;
            font-family: 'Nunito Sans', sans-serif;
        }
        
        /* Breadcrumb Styles */
        .zz-breadcrumb-area {
            background-color: #fff;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
            margin-bottom: 30px;
        }
        
        .zz-breadcrumb {
            margin-bottom: 0;
            padding: 0;
            background: none;
        }
        
        .zz-breadcrumb-item a {
            color: #555;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .zz-breadcrumb-item a:hover {
            color: #e74c3c;
        }
        
        .zz-breadcrumb-item.active {
            color: #e74c3c;
        }
        
        /* Product Detail Styles */
        .zz-product-detail {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* Product Images Section */
        .zz-product-gallery {
            position: relative;
            margin-bottom: 20px;
        }
        
        .zz-main-image {
            text-align: center;
            background-color: #f9f9f9;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 15px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .zz-main-image img.zoom-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .zz-thumbnails {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .zz-thumbnail {
            width: 80px;
            height: 80px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: border-color 0.3s;
        }
        
        .zz-thumbnail:hover, .zz-thumbnail.active {
            border-color: #e74c3c;
        }
        
        .zz-thumbnail img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        /* Zoom Styles */
        .zoom-container {
            position: relative;
            display: inline-block;
        }

        .zoom-image {
            transition: transform 0.5s ease;
        }

        .zoom-lens {
            position: absolute;
            border: 2px solid #fff;
            border-radius: 50%;
            cursor: crosshair;
            width: 300px;
            height: 300px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            background: rgba(255, 255, 255, 0.5);
        }

        .zoom-container:hover .zoom-lens {
            opacity: 1;
        }
        
        /* Product Info Section */
        .zz-product-info h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #333;
        }
        
        .zz-product-price {
            font-size: 22px;
            font-weight: 800;
            color: #e74c3c;
            margin-bottom: 15px;
        }
        
        .zz-original-price {
            font-size: 16px;
            color: #999;
            text-decoration: line-through;
            margin-left: 10px;
        }
        
        .zz-discount-badge {
            background-color: #e74c3c;
            color: white;
            font-size: 14px;
            padding: 3px 8px;
            border-radius: 3px;
            margin-left: 10px;
        }
        
        .zz-product-desc {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .zz-product-meta {
            margin-bottom: 20px;
        }
        
        .zz-meta-item {
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .zz-meta-label {
            font-weight: 600;
            color: #555;
            width: 120px;
            display: inline-block;
        }
        
        .zz-meta-value {
            color: #777;
        }
        
        /* Quantity Selector */
        .zz-quantity-wrapper {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .zz-quantity-label {
            font-weight: 600;
            color: #555;
            margin-right: 15px;
        }
        
        .zz-quantity-selector {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .zz-quantity-btn {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8f9fa;
            border: none;
            color: #555;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .zz-quantity-btn:hover {
            background-color: #e9ecef;
        }
        
        .zz-quantity-input {
            width: 50px;
            height: 35px;
            text-align: center;
            border: none;
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
        }
        
        /* Action Buttons */
        .zz-action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .zz-add-to-cart {
            flex: 3;
            background-color: black;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: center;
            text-decoration: none;
            display: block;
        }
        
        .zz-add-to-cart:hover {
            background-color: #333;
            color: white;
            text-decoration: none;
        }
        
        .zz-add-to-wishlist {
            flex: 1;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            color: #e74c3c;
            padding: 12px 20px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            text-decoration: none;
            display: block;
        }
        
        .zz-add-to-wishlist:hover {
            background-color: #e74c3c;
            border-color: #e74c3c;
            color: white;
            text-decoration: none;
        }
        
        /* Product Details Tabs */
        .zz-product-tabs {
            margin-top: 40px;
        }
        
        .zz-nav-tabs {
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .zz-nav-item {
            margin-right: 5px;
        }
        
        .zz-nav-link {
            padding: 10px 20px;
            font-weight: 600;
            color: #555;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .zz-nav-link:hover {
            color: #e74c3c;
            background-color: #fff;
            text-decoration: none;
        }
        
        .zz-nav-link.active {
            color: #e74c3c;
            background-color: #fff;
            border-bottom: 1px solid #fff;
            margin-bottom: -1px;
        }
        
        .zz-tab-content {
            padding: 20px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }
        
        .zz-tab-pane {
            display: none;
        }
        
        .zz-tab-pane.active {
            display: block;
        }
        
        /* Related Products Section */
        .zz-related-products {
            padding-top: 30px;
            margin-top: 30px;
        }
        
        .zz-section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #333;
            position: relative;
            padding-bottom: 10px;
        }
        
        .zz-section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background-color: #e74c3c;
        }
        
        .product-item {
            border: 1px solid #e5e5e5;
            border-radius: 5px;
            background-color: #fff;
            transition: all 0.3s;
            margin-bottom: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .product-item:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-5px);
        }
        
        .product-img-wrap {
            position: relative;
            padding: 15px;
            background-color: #f5f5f5;
            text-align: center;
        }
        
        .product-img-wrap img {
            max-width: 100%;
            height: auto;
            max-height: 180px;
            object-fit: contain;
        }
        
        .wishlist-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1;
        }
        
        .wishlist-btn a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
            color: #e74c3c;
            transition: all 0.3s;
        }
        
        .wishlist-btn a:hover {
            color: #c0392b;
            transform: scale(1.1);
        }
        
        .product-details {
            padding: 12px 15px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }
        
        .product-details h6 {
            font-size: 15px;
            margin-bottom: 5px;
            color: #333;
            font-weight: 600;
            line-height: 1.4;
        }
        
        .price-box {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 15px;
            color: #333;
        }
        
        .cart-btn {
            display: block;
            width: 100%;
            padding: 8px 0;
            background-color: black;
            color: white;
            text-align: center;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 600;
            text-decoration: none;
            transition: background-color 0.3s;
            margin-top: auto;
        }
        
        .cart-btn:hover {
            background-color: #333;
            color: white;
            text-decoration: none;
        }
        
        /* Responsive Styles */
        @media (max-width: 991px) {
            .zz-product-info {
                margin-top: 30px;
            }
        }
        
        @media (max-width: 767px) {
            .zz-main-image {
                height: 300px;
            }
            
            .zz-thumbnail {
                width: 60px;
                height: 60px;
            }
            
            .zz-product-info h1 {
                font-size: 20px;
            }
            
            .zz-product-price {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <% if (product.isBlocked) { %>
       Product Blocked Message -->
        <!-- <div class="container">
            <div class="product-unavailable">
                <h2>Product Not Available</h2>
                <p>This product has been blocked by the administrator.</p>
                <a href="/shop" class="btn btn-primary">Back to Shop</a>
            </div>
        </div>
    <% } else { %>
     -->
        <!-- Breadcrumb Navigation -->
        <!-- <div class="zz-breadcrumb-area">
            <div class="container">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb zz-breadcrumb">
                        <li class="breadcrumb-item zz-breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item zz-breadcrumb-item"><a href="/shop">Shop</a></li>
                        <li class="breadcrumb-item zz-breadcrumb-item active" aria-current="page"><%= product.productName %></li>
                    </ol>
                </nav>
            </div>
        </div> -->
    
        <!-- Product Detail Container -->
        <!-- <div class="container">
            <div class="zz-product-detail">
                <div class="row"> -->
                    <!-- Product Gallery -->
                    <!-- <div class="col-lg-6">
                        <div class="zz-product-gallery">
                            <div class="zz-main-image zoom-container">
                                <img id="mainImage" class="zoom-image" src="/Uploads/product-images/<%= product.productImage[0] %>" alt="<%= product.productName %>">
                                <div class="zoom-lens"></div>
                            </div> -->
                            <!-- <div class="zz-thumbnails">
                                <% if (product.productImage && product.productImage.length > 0) { %>
                                    <% product.productImage.forEach((image, index) => { %>
                                        <div class="zz-thumbnail <%= index === 0 ? 'active' : '' %>" data-image="/Uploads/product-images/<%= image %>">
                                            <img src="/Uploads/product-images/<%= image %>" alt="<%= product.productName %> thumbnail <%= index + 1 %>">
                                        </div>
                                    <% }) %>
                                <% } %>
                            </div>
                        </div>
                    </div>
    
                    <!-- Product Info -->
                    <!-- <div class="col-lg-6">
                        <div class="zz-product-info">
                            <h1><%= product.productName %></h1>
                            <div class="zz-product-price">
                                ₹ <%= product.salePrice %>
                                <% if (product.regularPrice && product.regularPrice > product.salePrice) { %>
                                    <span class="zz-original-price">₹ <%= product.regularPrice %></span>
                                    <% const discount = Math.round(((product.regularPrice - product.salePrice) / product.regularPrice) * 100) %>
                                    <span class="zz-discount-badge"><%= discount %>% OFF</span>
                                <% } %>
                            </div> -->
    
                            <!-- <div class="zz-product-desc">
                                <%= product.description %>
                            </div>
    
                            <div class="zz-product-meta">
                                <div class="zz-meta-item">
                                    <span class="zz-meta-label">Category:</span>
                                    <span class="zz-meta-value"><%= product.category ? product.category.name : 'N/A' %></span>
                                </div>
                                <div class="zz-meta-item">
                                    <span class="zz-meta-label">Brand:</span> -->
                                    <!-- <span class="zz-meta-value"><%= product.brand ? product.brand.name : 'N/A' %></span>
                                </div>
                                <div class="zz-meta-item">
                                    <span class="zz-meta-label">SKU:</span>
                                    <span class="zz-meta-value"><%= product.sku || 'N/A' %></span>
                                </div>
                                <div class="zz-meta-item">
                                    <span class="zz-meta-label">Availability:</span>
                                    <span class="zz-meta-value" style="color: <%= product.quantity > 0 ? 'green' : 'red' %>;  font-weight: 900;">
                                      <%= product.quantity > 0 ? 'In Stock' : 'Out of Stock' %>
                                    </span> -->
                                  <!-- </div>
                                  
                            </div> -->
    
                            <!-- Quantity Selector -->
                            <!-- <div class="zz-quantity-wrapper">
                                <span class="zz-quantity-label">Quantity:</span>
                                <div class="zz-quantity-selector">
                                    <button type="button" class="zz-quantity-btn" id="decreaseQty">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <input type="number" id="quantityInput" class="zz-quantity-input" value="1" min="1" max="<%= product.quantity|| 10 %>">
                                    <button type="button" class="zz-quantity-btn" id="increaseQty">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div> -->
    
                            <!-- Action Buttons -->
                            <!-- <div class="zz-action-buttons">
                                <button id="addToCartBtn" class="zz-add-to-cart" data-product-id="<%= product._id %>">ADD TO CART</button>
                                <a href="/addToWishlist?id=<%= product._id %>" class="zz-add-to-wishlist">
                                    <i class="fa fa-heart"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div> -->
    
                <!-- Product Details Tabs -->
                <!-- <div class="zz-product-tabs">
                    <ul class="nav zz-nav-tabs" id="productTabs" role="tablist">
                        <li class="nav-item zz-nav-item">
                            <a class="nav-link zz-nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Description</a>
                        </li>
                        <li class="nav-item zz-nav-item">
                            <a class="nav-link zz-nav-link" id="specs-tab" data-toggle="tab" href="#specs" role="tab" aria-controls="specs" aria-selected="false">Specifications</a>
                        </li>
                        <li class="nav-item zz-nav-item">
                            <a class="nav-link zz-nav-link" id="reviews-tab" data-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="false">Reviews</a>
                        </li>
                    </ul>
                    <div class="tab-content zz-tab-content" id="productTabContent">
                        <div class="tab-pane zz-tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                            <p><%= product.fullDescription || product.description %></p>
                        </div>
                        <div class="tab-pane zz-tab-pane fade" id="specs" role="tabpanel" aria-labelledby="specs-tab">
                            <table class="table table-bordered">
                                <tbody>
                                    <tr><td width="30%"><strong>RAM</strong></td><td><%= product.ram || 'N/A' %></td></tr>
                                    <tr><td width="30%"><strong>Storage</strong></td><td><%= product.storage || 'N/A' %></td></tr>
                                    <tr><td width="30%"><strong>Processor</strong></td><td><%= product.processor || 'N/A' %></td></tr>
                                    <tr><td width="30%"><strong>Color</strong></td><td><%= product.color || 'N/A' %></td></tr>
                                    <% if (product.specifications && product.specifications.length > 0) { %>
                                        <% product.specifications.forEach(spec => { %>
                                            <tr><td><strong><%= spec.name %></strong></td><td><%= spec.value %></td></tr>
                                        <% }) %>
                                    <% } %> -->
                                <!-- </tbody>
                            </table>
                        </div>
                        <div class="tab-pane zz-tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                            <% if (product.reviews && product.reviews.length > 0) { %>
                                <% product.reviews.forEach(review => { %>
                                    <div class="review-item mb-4 pb-4 border-bottom">
                                        <div class="d-flex justify-content-between mb-2">
                                            <h5 class="mb-0"><%= review.userName %></h5>
                                            <div class="review-rating">
                                                <% for(let i = 1; i <= 5; i++) { %>
                                                    <i class="fa fa-star <%= i <= review.rating ? 'text-warning' : 'text-muted' %>"></i>
                                                <% } %>
                                            </div>
                                        </div>
                                        <p class="text-muted small"><%= new Date(review.date).toLocaleDateString() %></p> -->
                                        <!-- <p><%= review.comment %></p>
                                    </div>
                                <% }) %>
                            <% } else { %>
                                <p>No reviews yet. Be the first to review this product!</p>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
     -->
            <!-- Related Products -->
            <!-- <div class="zz-related-products">
                <h2 class="zz-section-title">Related Products</h2>
                <div class="row">
                    <% if (relatedProducts && relatedProducts.length > 0) { %>
                        <% relatedProducts.forEach(relatedProduct => { %>
                            <div class="col-lg-3 col-md-4 col-sm-6 col-12 mb-4">
                                <div class="product-item">
                                    <div class="product-img-wrap">
                                        <a href="productDetails?id=<%= relatedProduct._id %>">
                                            <img src="/Uploads/product-images/<%= relatedProduct.productImage[0] %>" alt="<%= relatedProduct.productName %>">
                                        </a>
                                        <div class="wishlist-btn">
                                            <a href="/addToWishlist?id=<%= relatedProduct._id %>" aria-label="Add to wishlist">
                                                <i class="fa fa-heart"></i>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="product-details">
                                        <h6><a href="productDetails?id=<%= relatedProduct._id %>" class="text-dark text-decoration-none"><%= relatedProduct.productName %></a></h6>
                                        <div class="price-box">₹ <%= relatedProduct.salePrice %></div>
                                        <a href="/addToCart?id=<%= relatedProduct._id %>" class="cart-btn">ADD TO CART</a>
                                    </div>
                                </div> -->
                            <!-- </div>
                        <% }) %>
                    <% } else { %> --> -->
                        <!-- <div class="col-12 text-center py-3">
                            <p>No related products found</p>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    
        <%- include("../partials/user/footer") %>
    
    <% } %>
    
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mainImage = document.getElementById('mainImage');
            const thumbnails = document.querySelectorAll('.zz-thumbnail');
            
            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', function() {
                    mainImage.src = this.getAttribute('data-image');
                    thumbnails.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Quantity selector
            const decreaseBtn = document.getElementById('decreaseQty');
            const increaseBtn = document.getElementById('increaseQty');
            const quantityInput = document.getElementById('quantityInput');
            const addToCartBtn = document.getElementById('addToCartBtn');
            
            decreaseBtn.addEventListener('click', function() {
                const currentValue = parseInt(quantityInput.value);
                if (currentValue > 1) {
                    quantityInput.value = currentValue - 1;
                }
            });
            
            increaseBtn.addEventListener('click', function() {
                const currentValue = parseInt(quantityInput.value);
                const maxValue = parseInt(quantityInput.getAttribute('max'));
                if (currentValue < maxValue) {
                    quantityInput.value = currentValue + 1;
                }
            });
            
            quantityInput.addEventListener('change', function() {
                const value = parseInt(this.value);
                const min = parseInt(this.getAttribute('min'));
                const max = parseInt(this.getAttribute('max'));
                
                if (value < min) {
                    this.value = min;
                } else if (value > max) {
                    this.value = max;
                }
            });
            
            // AJAX Add to Cart
            addToCartBtn.addEventListener('click', function(e) {
                e.preventDefault();
                const productId = this.getAttribute('data-product-id');
                const quantity = parseInt(quantityInput.value);
                const userId = localStorage.getItem('userId'); // Or get userId from the session/cookie

                
                $.ajax({
                    url: '/addToCart',
                    type: 'POST',
                    data: {
                        id: productId,
                        qty: quantity
                    },
                    success: function(response) {
                        if (response.success) {
                            Swal.fire({
                     icon: 'success',
                     title: 'Added to Cart',
                     text: 'Product successfully added to your cart!',
                     timer: 2000,
                     showConfirmButton: false
                    });
                            // Optionally update cart count in UI or redirect
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'Add Failed',
                                text: 'Could not add the product. Please try again.',
                            });
                        }
                    },
                    error: function(xhr, status, error) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: 'Something went wrong!',
                        });
                        console.error('AJAX Error:', status, error);
                    }
                });
            });
             -->
//             const tabLinks = document.querySelectorAll('.zz-nav-link');
//             const tabContents = document.querySelectorAll('.zz-tab-pane');
            
//             tabLinks.forEach(link => {
//                 link.addEventListener('click', function(e) {
//                     e.preventDefault();
                    
//                     tabLinks.forEach(tab => tab.classList.remove('active'));
//                     tabContents.forEach(content => {
//                         content.classList.remove('show', 'active');
//                         content.classList.add('fade');
//                     });
                    
//                     this.classList.add('active');
//                     const target = document.querySelector(this.getAttribute('href'));
//                     target.classList.add('show', 'active');
//                 });
//             });

//             // Zoom functionality
//             document.querySelectorAll('.zoom-container').forEach(container => {
//                 const img = container.querySelector('.zoom-image');
//                 const lens = container.querySelector('.zoom-lens');

//                 container.addEventListener('mousemove', (e) => {
//                     const { left, top, width, height } = container.getBoundingClientRect();

//                     const posX = e.clientX - left;
//                     const posY = e.clientY - top;

//                     const lensX = Math.max(0, Math.min(posX - (lens.offsetWidth / 2), width - lens.offsetWidth));
//                     const lensY = Math.max(0, Math.min(posY - (lens.offsetHeight / 2), height - lens.offsetHeight));

//                     lens.style.left = lensX + 'px';
//                     lens.style.top = lensY + 'px';

//                     const zoomedImgUrl = img.src;
//                     lens.style.backgroundImage = url(${zoomedImgUrl});
//                     lens.style.backgroundSize = ${img.width * 2}px ${img.height * 2}px;
//                     lens.style.backgroundPosition = -${posX * 2}px -${posY * 2}px;
//                 });

//                 container.addEventListener('mouseleave', () => {
//                     lens.style.opacity = '0';
//                 });

//                 container.addEventListener('mouseenter', () => {
//                     lens.style.opacity = '1';
//                 });
//             });
//         });
//     </script>
// </body>
// </html> 